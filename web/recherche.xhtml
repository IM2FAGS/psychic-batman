<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition template="/template.xhtml">
        <ui:define name="title">
            Accueil
        </ui:define>
        <ui:define name="body">
            <h:outputText value="No matches found!" rendered="#{ empty produitsRecherche.produits}" />
            
            
            <h:form>
                <h:inputText value="#{produitsRecherche.query}" required="true" />
                <h:commandButton value="Search" action="#{produitsRecherche.search}" />
                <h:messages />
            </h:form>

            <h:form id="form">

                <p:dataGrid var="prod" value="#{produitsRecherche.produits}" columns="3"
                            rows="12" paginator="true"
                            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                            rowsPerPageTemplate="9,12,15">

                    <p:panel header="#{prod.nom}" style="text-align:center">
                        <h:panelGrid columns="1" style="width:100%">
                            <!--<p:graphicImage value="/images/cars/#{car.manufacturer}.jpg"/>--> 

                            <h:outputText value="#{prod.prix}" />

                            <p:commandLink update=":form:prodDetail" oncomplete="PF('prodDialog').show()" title="View Detail">
                                <h:outputText styleClass="ui-icon ui-icon-search" style="margin:0 auto;" /> 
                                <f:setPropertyActionListener value="#{prod}" 
                                                             target="#{produitsRecherche.selectedProduit}" />
                            </p:commandLink>
                        </h:panelGrid>
                    </p:panel>

                </p:dataGrid>

                <p:dialog header="Details Produit" widgetVar="prodDialog" modal="true">
                    <p:outputPanel id="prodDetail" style="text-align:center;">

                        <!--<p:graphicImage value="/images/cars/#{tableBean.selectedCar.manufacturer}.jpg"/>-->

                        <h:panelGrid  columns="2" cellpadding="5">
                            <h:outputLabel for="nom" value="Model No: " />
                            <h:outputText id="nom" value="#{produitsRecherche.selectedProduit.nom}" />

                            <h:outputLabel for="description" value="description " />
                            <h:outputText id="description" value="#{produitsRecherche.selectedProduit.description}" />

                            <h:outputLabel for="prix" value="prix " />
                            <h:outputText id="prix" value="#{produitsRecherche.selectedProduit.prix}"/>
                        </h:panelGrid>
                    </p:outputPanel>
                </p:dialog>

            </h:form>



            <h:dataTable value="#{produitsRecherche.produits}" var="prod" rendered="#{not empty produitsRecherche.produits}">
                <h:column>#{prod.nom}</h:column>
                <h:column>#{prod.description}</h:column>
            </h:dataTable>
            <h:outputText value="No matches found!" rendered="#{not empty produitsRecherche.query and empty produitsRecherche.produits}" />
        </ui:define>
    </ui:composition>

</html>

