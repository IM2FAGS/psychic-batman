<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition template="/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui">
    <ui:define name="title">
        <h:outputText value="#{bundle.Search}" />
    </ui:define>
    <ui:define name="body">
        <h:outputText value="No matches found!" rendered="#{empty rechercheController.produits}" />

        <h:form id="form">
            <h:outputText value="#{rechercheController.categorieQuery.nom}" />
            <p:dataGrid var="prod" value="#{rechercheController.produits}" columns="3"
                        rows="12" paginator="true"
                        paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                        rowsPerPageTemplate="9,12,15">

                <p:panel header="#{prod.nom}" style="text-align:center" >
					<h:commandLink action="#{afficherProduitController.afficheProduit()}">
						<f:setPropertyActionListener value="#{prod}" 
                                                         target="#{afficherProduitController.produit}" />
						<p:graphicImage value="#{imageController.image}">
							<f:param name="imageId" value="#{prod.id}" />
							<f:param name="thumb" value="#{false}" />
						</p:graphicImage>
					</h:commandLink>
                    <h:panelGrid columns="1" style="width:100%">
                        <!--<p:graphicImage value="/images/cars/#-{car.manufacturer}.jpg"/>--> 

                        <p:commandLink update=":form:prodDetail" oncomplete="PF('prodDialog').show()" title="View Detail">
                            <h:outputText styleClass="ui-icon ui-icon-search" style="margin:0 auto;" /> 
                            <f:setPropertyActionListener value="#{prod}" 
                                                         target="#{rechercheController.selectedProduit}" />
                        </p:commandLink>
                    </h:panelGrid>
                </p:panel>

            </p:dataGrid>

            <p:dialog header="Details Produit" widgetVar="prodDialog" modal="true">
                <p:outputPanel id="prodDetail" style="text-align:center;">

                        <!--<p:graphicImage value="/images/cars/#{tableBean.selectedCar.manufacturer}.jpg"/>-->

                    <h:panelGrid  columns="2" cellpadding="5">
                        <h:outputLabel for="nom" value="Model No: " />
                        <h:outputText id="nom" value="#{rechercheController.selectedProduit.nom}" />

                        <h:outputLabel for="description" value="description " />
                        <h:outputText id="description" value="#{rechercheController.selectedProduit.description}" />
                    </h:panelGrid>
                </p:outputPanel>
            </p:dialog>

        </h:form>
    </ui:define>
</ui:composition>


